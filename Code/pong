import pygame
from math import sin, cos, pi
from time import sleep

BILDSCHIRM_X = 320
BILDSCHIRM_Y = 200

pygame.init()
pygame.display.set_mode(size=(BILDSCHIRM_X + 1, BILDSCHIRM_Y))

SCHLAEGER_LAENGE = 25
schlaeger_y = BILDSCHIRM_Y / 2
ball_x = 1
ball_y = 100
ball_geschwindigkeit = 5
ball_richtung = 45 / 180 * pi


surface = pygame.display.get_surface()
quit = False


def play_pong():
    if evts := pygame.event.get():
        for evt in evts:
            if evt.type == pygame.QUIT:
                quit = True
    pygame.display.flip()
    ball_x = ball_x + ball_geschwindigkeit * cos(ball_richtung)
    ball_y = ball_y + ball_geschwindigkeit * sin(ball_richtung)
    if ball_x <= 0:
        ball_richtung = (pi + ball_richtung) % (2 * pi)
        ball_x = -ball_x
    if ball_y > BILDSCHIRM_Y:
        ball_richtung = (2 * pi) - ball_richtung
        ball_y = BILDSCHIRM_Y - (ball_y - BILDSCHIRM_Y)
    if ball_y < 0:
        ball_richtung = (2 * pi) - ball_richtung
        ball_y = -ball_y
    if ball_x >= BILDSCHIRM_X:
        if ball_y >= schlaeger_y and ball_y <= schlaeger_y:
            ball_richtung = (pi + ball_richtung) % (2 * pi)
            ball_x = -ball_x

    surface.fill(color=(0, 0, 0))
    pygame.draw.circle(
        surface=surface,
        color=(255, 255, 255),
        center=(ball_x, ball_y),
        radius=2,
        width=0,
    )
    pygame.draw.line(
        surface=surface,
        color=(255, 0, 0),
        start_pos=(BILDSCHIRM_X, schlaeger_y),
        end_pos=(BILDSCHIRM_X, schlaeger_y + SCHLAEGER_LAENGE),
    )
    if quit:
        pygame.quit()
    # sleep(0.1)
